!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("plotly.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("@n-fuse/ng-plotly",["exports","@angular/core","plotly.js","@angular/common"],e):e(t.nfLib={},t.ng.core,null,t.ng.common)}(this,function(t,o,r,e){"use strict";function i(e,r,a,l){return new(a||(a=Promise))(function(t,o){function n(t){try{s(l.next(t))}catch(e){o(e)}}function i(t){try{s(l["throw"](t))}catch(e){o(e)}}function s(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,i)}s((l=l.apply(e,r||[])).next())})}function s(o,n){var i,s,r,t,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(r=s[2&t[0]?"return":t[0]?"throw":"next"])&&!(r=r.call(s,t[1])).done)return r;switch(s=0,r&&(t=[0,r.value]),t[0]){case 0:case 1:r=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(r=0<(r=a.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){a.label=t[1];break}if(6===t[0]&&a.label<r[1]){a.label=r[1],r=t;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(t);break}r[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(o,a)}catch(e){t=[6,e],s=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var n="WebkitAppearance"in document.documentElement.style,a="resize",l="plotId",u="plotClass",c="data",h="layout",d="configuration",p="events",g="frames",f="width",y="height",v={None:0,Restyle:1,Relayout:2,Resize:3,Update:4,Redraw:5,Recreate:6};v[v.None]="None",v[v.Restyle]="Restyle",v[v.Relayout]="Relayout",v[v.Resize]="Resize",v[v.Update]="Update",v[v.Redraw]="Redraw",v[v.Recreate]="Recreate";var b=function(){function e(t){var e=this;this.cd=t,this.receivedResize=!1,this.afterPlot=!1,this.debug=!1,this.plotId="",this.plotClass="";var o=this.tag+".constructor()";this.debug&&console.log(o),this.resizeHandler=function(){e.tag;n?e.receivedResize?(e.resize(),e.receivedResize=!1):e.receivedResize=!0:e.resize()}.bind(this)}return e.prototype.ngOnInit=function(){this.tag=e.Tag+"."+this.plotId;var t=this.tag+".ngOnInit()";this.debug&&console.log(t)},e.prototype.ngAfterViewInit=function(){var t=this,e=this.tag+".ngAfterViewInit()";this.debug&&console.log(e),setTimeout(function(){return t.recreate()})},e.prototype.ngOnChanges=function(t){var e=this,o=this.tag+".ngOnChanges()";if(this.plot){this.debug&&console.log(o,"changes:",t);var n=Object.keys(t);w(n,[f,y])&&(this.changeAction=v.Resize),w(n,[h,l,u])&&(this.changeAction=v.Relayout),m(n,c)&&(this.changeAction=v.Redraw),w(n,[d,p,g])&&(this.changeAction=v.Recreate),setTimeout(function(){return e.applyChanges()})}else this.debug&&console.log(o,"ignoring changes, plot not yet once initialized")},e.prototype.applyChanges=function(){var t=this.tag+".applyChanges()";switch(this.debug&&console.log(t,"this.changeAction:",v[this.changeAction]),this.changeAction){case v.Resize:this.resize();break;case v.Relayout:this.relayout();break;case v.Redraw:this.redraw();break;case v.Recreate:this.recreate()}this.changeAction=v.None},e.prototype.restyle=function(o,n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".restyle()",this.debug&&console.log(e,"update:",o),this.debug&&console.log(e,"traces:",n===undefined?"all":n),[2,r.restyle(this.plot,o,n)]})})},e.prototype.resize=function(o){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=this.tag+".resize()",this.debug&&console.log(e,"event:",o),[4,r.Plots.resize(this.plot)];case 1:return t.sent(),[2]}})})},e.prototype.relayout=function(o){return void 0===o&&(o=this.layout),i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=this.tag+".relayout()",this.debug&&console.log(e,"layout:",o),[4,r.relayout(this.plot,o)];case 1:return t.sent(),[2]}})})},e.prototype.update=function(o,n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".update()",this.debug&&console.log(e,"dataUpdate:",o),this.debug&&console.log(e,"layoutUpdate:",n),[2,r.update(this.plot,o,n)]})})},e.prototype.redraw=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".redraw()",this.debug&&console.log(e),this.plot.data=this.data,this.plot.layout=this.layout,[2,r.redraw(this.plot)]})})},e.prototype.recreate=function(){return i(this,void 0,void 0,function(){var e,o;return s(this,function(t){switch(t.label){case 0:return e=this.tag+".recreate()",this.debug&&console.log(e),this.removeEventListeners(),this.plot=document.getElementById(this.plotId),this.plot?(this.width&&(this.plot.style.width=this.width+"%",this.plot.style["margin-left"]=(100-this.width)/2+"%"),this.height&&(this.plot.style.height=this.height+"%",this.plot.style["margin-top"]=(100-this.height)/2+"%"),this.debug&&console.log(e,"this.plot:",this.plot),o=!(!this.width&&!this.height),this.debug&&console.log(e,{resizePlot:o}),r.newPlot(this.plot,{data:this.data,layout:this.layout,config:this.configuration,frames:this.frames}),this.attachEventListeners(this.plot,this.events),this.width||this.height?(this.debug&&console.log(e,"resizing"),[4,this.resize()]):[3,2]):[2];case 1:return t.sent(),this.afterPlot=!0,[3,3];case 2:this.afterPlot=!0,t.label=3;case 3:return[2]}})})},e.prototype.attachEventListeners=function(t,i){var s=this,e=this.tag+".attachEventListeners()";this.debug&&console.log(e,"events:",i),Object.keys(i||{}).forEach(function(o){var n=s.tag+"."+o+"()";s.plot.on(o,function(t,e){s.debug&&console.log(n,"data:",t),s.debug&&console.log(n,"event:",e),i[o](t,e,s,r)})}),window.addEventListener(a,this.resizeHandler)},e.prototype.removeEventListeners=function(){var t=this.tag+".removeEventListeners()";this.debug&&console.log(t),window.removeEventListener(a,this.resizeHandler)},e.prototype.addTraces=function(o,n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".addTraces()",this.debug&&console.log(e,"traces:",o),this.debug&&console.log(e,"index:",n),[2,n===undefined?r.addTraces(this.plot,o):r.addTraces(this.plot,o,n)]})})},e.prototype.deleteTraces=function(o){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".deleteTraces()",this.debug&&console.log(e,"traces:",o),[2,r.deleteTraces(this.plot,o)]})})},e.prototype.animate=function(o,n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".animate()",this.debug&&console.log(e,"update:",o),this.debug&&console.log(e,"animation:",n),[2,r.animate(this.plot,o,n)]})})},e.prototype.addFrames=function(o,n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".addFrames()",this.debug&&console.log(e,"frames:",o),this.debug&&console.log(e,"indices:",n),[2,r.addFrames(this.plot,o,n)]})})},e.prototype.deleteFrames=function(o){return i(this,void 0,void 0,function(){var e;return s(this,function(t){return e=this.tag+".deleteFrames()",this.debug&&console.log(e,"frames:",frames),[2,r.deleteFrames(this.plot,o)]})})},e.prototype.ngOnDestroy=function(){var t=this.tag+".ngOnDestroy()";this.debug&&console.log(t),this.removeEventListeners()},e.Tag="PlotlyComponent",e.decorators=[{type:o.Component,args:[{selector:"plotly",template:'<div\n  id="{{ plotId }}"\n  class="{{ plotClass }}">\n</div>\n',changeDetection:o.ChangeDetectionStrategy.OnPush,host:{"[style.width]":'"100%"',"[style.height]":'"100%"'}}]}],e.ctorParameters=function(){return[{type:o.ChangeDetectorRef}]},e.propDecorators={debug:[{type:o.Input}],plotId:[{type:o.Input}],plotClass:[{type:o.Input}],data:[{type:o.Input}],layout:[{type:o.Input}],configuration:[{type:o.Input}],events:[{type:o.Input}],frames:[{type:o.Input}],width:[{type:o.Input}],height:[{type:o.Input}]},e}();function m(t,e){return-1!==t.indexOf(e)}function w(e,t){return t.some(function(t){return m(e,t)})}var R=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[e.CommonModule],exports:[b],declarations:[b],providers:[]}]}],t}();t.PlotlyModule=R,t.PlotlyComponent=b,t.PlotlyEvent={Hover:"plotly_hover",Unhover:"plotly_unhover",Click:"plotly_click",DoubleClick:"plotly_doubleclick",ClickAnnotation:"plotly_clickannotation",AfterPlot:"plotly_afterplot",Redraw:"plotly_redraw",Restyle:"plotly_restyle",Relayout:"plotly_relayout",Selecting:"plotly_selecting",Selected:"plotly_selected",Deselect:"plotly_deselect"},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=n-fuse-ng-plotly.umd.min.js.map